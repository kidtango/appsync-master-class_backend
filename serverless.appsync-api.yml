name: appsyncmasterclass
schema: schema.graphql

authentication:
  type: AMAZON_COGNITO_USER_POOLS
  config:
    awsRegion: us-east-1
    defaultAction: ALLOW
    userPoolId: !Ref CognitoUserPool

dataSources:
  usersTable:
    type: AMAZON_DYNAMODB
    config:
      tableName: !Ref UsersTable
    
  getImageUploadUrlFn:
    type: AWS_LAMBDA
    config:
      functionName: getImageUploadUrl

resolvers:
  getMyProfile:
    kind: UNIT
    type: Query
    field: getMyProfile
    dataSource: usersTable
    request: mapping-templates/queries/getMyProfile.request.vtl
    response: mapping-templates/queries/getMyProfile.response.vtl
  
  editMyProfile:
    kind: UNIT
    type: Mutation
    field: editMyProfile
    dataSource: usersTable
    request: mapping-templates/mutations/editMyProfile.request.vtl
    response: mapping-templates/mutations/editMyProfile.response.vtl

  getImageUploadUrl:
    kind: UNIT
    type: Query
    field: getImageUploadUrl
    dataSource: getImageUploadUrlFn